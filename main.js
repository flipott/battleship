(()=>{"use strict";const t=(t,e,r)=>{const o=r,n=[];return{name:t,coords:e,length:o,hitArray:n,sunk:!1,hit:t=>{n.push(t)},isSunk:()=>n.length===o}},e=document.querySelector(".player-board"),r=(document.querySelector(".cpu-board"),(t,r)=>{if("human"===r){e.innerHTML="";for(let r=0;r<t.length;r+=1){const o=document.createElement("div");o.className="space",o.setAttribute("x",t[r].x),o.setAttribute("y",t[r].y),o.setAttribute("occupiedBy",t[r].occupiedBy),o.setAttribute("empty",t[r].empty),o.innerText=`${t[r].x}, ${t[r].y}`,e.appendChild(o)}}}),o=((e,r)=>{const o=e,n=r,s=(e=>{const r=e,o=[],n=[],s=[];for(let t=9;t>=0;t-=1)for(let e=0;e<10;e+=1)o.push({x:e,y:t,empty:!0,occupiedBy:null});const u=(t,e)=>{for(let r=0;r<o.length;r+=1)if(o[r].x===t&&o[r].y===e)return o[r];return!1},p=t=>{for(let e=0;e<n.length;e+=1)if(n[e].name===t)return n[e];return!1},a=t=>{for(let e=0;e<t.coords.length;e+=1){const r=t.coords[e][0],o=t.coords[e][1];u(r,o).empty=!1,u(r,o).occupiedBy=t.name}n.push(t)};function c(){let t=null;for(let e=0;e<o.length;e+=1){let e=Math.floor(10*Math.random()),r=Math.floor(10*Math.random());if(u(e,r).empty){t=[e,r];break}e=Math.floor(10*Math.random()),r=Math.floor(10*Math.random())}return t}function h(t,e){const r=[],o=t[0],n=t[1];if(u(o,n).empty&&u(o+1,n).empty&&u(o+2,n).empty&&u(o+3,n).empty&&u(o+4,n).empty){const t=[];t.push([o,n]),t.push([o+1,n]),t.push([o+2,n]),t.push([o+3,n]),t.push([o+4,n]),r.push(t)}if(u(o,n).empty&&u(o-1,n).empty&&u(o-2,n).empty&&u(o-3,n).empty&&u(o-4,n).empty){const t=[];t.push([o,n]),t.push([o-1,n]),t.push([o-2,n]),t.push([o-3,n]),t.push([o-4,n]),r.push(t)}if(u(o,n).empty&&u(o,n+1).empty&&u(o,n+2).empty&&u(o,n+3).empty&&u(o,n+4).empty){const t=[];t.push([o,n]),t.push([o,n+1]),t.push([o,n+2]),t.push([o,n+3]),t.push([o,n+4]),r.push(t)}if(u(o,n).empty&&u(o,n-1).empty&&u(o,n-2).empty&&u(o,n-3).empty&&u(o,n-4).empty){const t=[];t.push([o,n]),t.push([o,n-1]),t.push([o,n-2]),t.push([o,n-3]),t.push([o,n-4]),r.push(t)}let s=r[Math.floor(Math.random()*r.length)];return s?(s=s.slice(0,e),s):h(c(),e)}return{owner:r,board:o,getSpace:u,generateFleet:()=>{const e=h(c(),5),r=t("carrier",e,5);a(r);const o=h(c(),4),n=t("battleship",o,4);a(n);const s=h(c(),3),u=t("destroyer",s,3);a(u);const p=h(c(),3),l=t("submarine",p,3);a(l);const m=h(c(),2),y=t("patrol",m,2);a(y)},receiveAttack:(t,e)=>{if(u(t,e).empty)u(t,e).occupiedBy="missed",u(t,e).empty=!1,s.push([t,e]);else{if(u(t,e).empty||"missed"===u(t,e).occupiedBy)return!1;{const r=u(t,e).occupiedBy;p(r).hit([t,e]),p(r).isSunk()&&(p(r).sunk=!0)}}},ships:n,allSunk:()=>!!(n[0].sunk&&n[1].sunk&&n[2].sunk&&n[3].sunk&&n[4].sunk)}})(o),u=[];return{name:o,type:n,board:s,receiveAttack:function(t,e){try{s.receiveAttack(t,e)}catch(t){console.log(t)}},sendRandomAttack:function(){let t=null;function e(t,e){let r=!0;for(let o=0;o<u.length;o+=1)u[o][0]===t&&u[o][1]===e&&(r=!1);return r}for(let r=0;r<100;r+=1){let r=Math.floor(10*Math.random()),o=Math.floor(10*Math.random());if(e(r,o)){t=[r,o],u.push(t);break}r=Math.floor(10*Math.random()),o=Math.floor(10*Math.random())}return t},sentAttacks:u}})("Player","human");r(o.board.board,o.type),o.board.generateFleet(),r(o.board.board,o.type)})();